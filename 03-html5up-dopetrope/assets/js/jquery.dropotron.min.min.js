!function(a){a.fn.disableSelection_dropotron=function(){return a(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},a.fn.dropotron=function(b){if(0==this.length){return a(this)}if(this.length>1){for(var c=0;c<this.length;c++){a(this[c]).dropotron(b)}}return a.dropotron(a.extend({selectorParent:a(this)},b))},a.dropotron=function(p){var e=a.extend({selectorParent:null,baseZIndex:1000,menuClass:"dropotron",expandMode:"hover",hoverDelay:150,hideDelay:250,openerClass:"opener",openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:"left",offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:!0,detach:!0,cloneOnDetach:!0},p),f=e.selectorParent,q=f.find("ul"),h=a("body"),m=a("body,html"),g=a(window),b=!1,j=null,k=null;f.on("doCollapseAll",function(){q.trigger("doCollapse")}),q.each(function(){var c=a(this),d=c.parent();e.hideDelay>0&&c.add(d).on("mouseleave",function(i){window.clearTimeout(k),k=window.setTimeout(function(){c.trigger("doCollapse")},e.hideDelay)}),c.disableSelection_dropotron().hide().addClass(e.menuClass).css("position","absolute").on("mouseenter",function(i){window.clearTimeout(k)}).on("doExpand",function(){if(c.is(":visible")){return !1}window.clearTimeout(k),q.each(function(){var i=a(this);a.contains(i.get(0),d.get(0))||i.trigger("doCollapse")});var o,x,w,t,z=d.offset(),n=d.position(),r=(d.parent().position(),d.outerWidth()),s=c.outerWidth(),y=c.css("z-index")==e.baseZIndex;if(y){switch(o=e.detach?z:n,t=o.top+d.outerHeight()+e.globalOffsetY,x=e.alignment,c.removeClass("left").removeClass("right").removeClass("center"),e.alignment){case"right":w=o.left-s+r,0>w&&(w=o.left,x="left");break;case"center":w=o.left-Math.floor((s-r)/2),0>w?(w=o.left,x="left"):w+s>g.width()&&(w=o.left-s+r,x="right");break;case"left":default:w=o.left,w+s>g.width()&&(w=o.left-s+r,x="right")}c.addClass(x)}else{switch("relative"==d.css("position")||"absolute"==d.css("position")?(t=e.offsetY,w=-1*n.left):(t=n.top+e.offsetY,w=0),e.alignment){case"right":w+=-1*d.parent().outerWidth()+e.offsetX;break;case"center":case"left":default:w+=d.parent().outerWidth()+e.offsetX}}navigator.userAgent.match(/MSIE ([0-9]+)\./)&&RegExp.$1<8&&(w+=e.IEOffsetX,t+=e.IEOffsetY),c.css("left",w+"px").css("top",t+"px").css("opacity","0.01").show();var l=!1;switch(w="relative"==d.css("position")||"absolute"==d.css("position")?-1*n.left:0,c.offset().left<0?(w+=d.parent().outerWidth()-e.offsetX,l=!0):c.offset().left+s>g.width()&&(w+=-1*d.parent().outerWidth()-e.offsetX,l=!0),l&&c.css("left",w+"px"),c.hide().css("opacity","1"),e.mode){case"zoom":b=!0,d.addClass(e.openerActiveClass),c.animate({width:"toggle",height:"toggle"},e.speed,e.easing,function(){b=!1});break;case"slide":b=!0,d.addClass(e.openerActiveClass),c.animate({height:"toggle"},e.speed,e.easing,function(){b=!1});break;case"fade":if(b=!0,y&&!e.noOpenerFade){var l;l="slow"==e.speed?80:"fast"==e.speed?40:Math.floor(e.speed/2),d.fadeTo(l,0.01,function(){d.addClass(e.openerActiveClass),d.fadeTo(e.speed,1),c.fadeIn(e.speed,function(){b=!1})})}else{d.addClass(e.openerActiveClass),d.fadeTo(e.speed,1),c.fadeIn(e.speed,function(){b=!1})}break;case"instant":default:d.addClass(e.openerActiveClass),c.show()}return !1}).on("doCollapse",function(){return c.is(":visible")?(c.hide(),d.removeClass(e.openerActiveClass),c.find("."+e.openerActiveClass).removeClass(e.openerActiveClass),c.find("ul").hide(),!1):!1}).on("doToggle",function(i){return c.is(":visible")?c.trigger("doCollapse"):c.trigger("doExpand"),!1}),d.disableSelection_dropotron().addClass("opener").css("cursor","pointer").on("click touchend",function(i){b||(i.preventDefault(),i.stopPropagation(),c.trigger("doToggle"))}),"hover"==e.expandMode&&d.hover(function(i){b||(j=window.setTimeout(function(){c.trigger("doExpand")},e.hoverDelay))},function(i){window.clearTimeout(j)})}),q.find("a").css("display","block").on("click touchend",function(c){b||a(this).attr("href").length<1&&c.preventDefault()}),f.find("li").css("white-space","nowrap").each(function(){var d=a(this),n=d.children("a"),l=d.children("ul"),c=n.attr("href");n.on("click touchend",function(i){0==c.length||"#"==c?i.preventDefault():i.stopPropagation()}),n.length>0&&0==l.length&&d.on("click touchend",function(i){b||(f.trigger("doCollapseAll"),i.stopPropagation())})}),f.children("li").each(function(){var i,v=a(this),o=v.children("ul");if(o.length>0){e.detach&&(e.cloneOnDetach&&(i=o.clone(),i.attr("class","").hide().appendTo(o.parent())),o.detach().appendTo(h));for(var d=e.baseZIndex,c=1,u=o;u.length>0;c++){u.css("z-index",d++),e.submenuClassPrefix&&u.addClass(e.submenuClassPrefix+(d-1-e.baseZIndex)),u=u.find("> li > ul")}}}),g.on("scroll",function(){f.trigger("doCollapseAll")}).on("keypress",function(c){b||27!=c.keyCode||(c.preventDefault(),f.trigger("doCollapseAll"))}),m.on("click touchend",function(){b||f.trigger("doCollapseAll")})}}(jQuery);